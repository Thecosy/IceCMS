<template>
  <div class="Resource">
    <!-- é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼ˆç™»å½•ï¼‰ -->
    <el-dialog :visible.sync="PaymentDialogVisibleLogin" :show-close="false" @close="closeDialog" width="320px" center>
      <h6 class="outh5">è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼</h6>
      <div class="swal2-content">
        <div id="swal2-content" style="display: block">
          <div class="pay-button-box">
            <div @click="selectPayTypeLogin('alipay')" class="pay-item" id="alipay" data-type="1">
              <img style="margin-right: 14px" height="40" width="40"
                src="../../static/image/pay/zhifubaorenzheng.svg" /><span>æ”¯ä»˜å®</span>
            </div>
            <div @click="selectPayTypeLogin('wxpay')" class="pay-item" id="weixinpay" data-type="2">
              <img style="margin: 12px" height="40" width="40"
                src="../../static/image/pay/weixinzhifu.svg" /><span>å¾®ä¿¡æ”¯ä»˜</span>
            </div>
            <div @click="selectPayTypeLogin('wxpay')" class="pay-item" id="weixinpay" data-type="2">
              <img style="margin: 12px" height="40" width="40"
                src="../../static/image/pay/jifen.svg" /><span>ç§¯åˆ†æ”¯ä»˜</span>
            </div>
          </div>
          <p style="font-size: 13px; padding: 0; margin: 0"></p>
        </div>
        <input class="swal2-input" style="display: none" /><input type="file" class="swal2-file"
          style="display: none" />
        <div class="swal2-range" style="display: none">
          <input type="range" /><output></output>
        </div>
        <select class="swal2-select" style="display: none"></select>
        <div class="swal2-radio" style="display: none"></div>
        <label for="swal2-checkbox" class="swal2-checkbox" style="display: none"><input type="checkbox" /><span
            class="swal2-label"></span></label><textarea class="swal2-textarea" style="display: none"></textarea>
        <div class="swal2-validation-message" id="swal2-validation-message" style="display: none"></div>
      </div>
    </el-dialog>
    <!-- é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼ˆä¸´æ—¶ï¼‰ -->
    <el-dialog :visible.sync="PaymentDialogVisibleTemp" :show-close="false" @close="closeDialog" width="320px" center>
      <h6 class="outh5">è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼</h6>
      <div class="swal2-content">
        <div id="swal2-content" style="display: block">
          <div class="pay-button-box">
            <div @click="selectPayType('alipay')" class="pay-item" id="alipay" data-type="1">
              <img style="margin-right: 14px" height="40" width="40"
                src="../../static/image/pay/zhifubaorenzheng.svg" /><span>æ”¯ä»˜å®</span>
            </div>
            <div @click="selectPayType('wxpay')" class="pay-item" id="weixinpay" data-type="2">
              <img style="margin: 12px" height="40" width="40"
                src="../../static/image/pay/weixinzhifu.svg" /><span>å¾®ä¿¡æ”¯ä»˜</span>
            </div>
          </div>
          <p style="font-size: 13px; padding: 0; margin: 0">
            å½“å‰ä¸ºæ¸¸å®¢è´­ä¹°æ¨¡å¼
          </p>
        </div>
        <input class="swal2-input" style="display: none" /><input type="file" class="swal2-file"
          style="display: none" />
        <div class="swal2-range" style="display: none">
          <input type="range" /><output></output>
        </div>
        <select class="swal2-select" style="display: none"></select>
        <div class="swal2-radio" style="display: none"></div>
        <label for="swal2-checkbox" class="swal2-checkbox" style="display: none"><input type="checkbox" /><span
            class="swal2-label"></span></label><textarea class="swal2-textarea" style="display: none"></textarea>
        <div class="swal2-validation-message" id="swal2-validation-message" style="display: none"></div>
      </div>
    </el-dialog>
    <!-- å¾®ä¿¡æ”¯ä»˜äºŒç»´ç  -->
    <div>
      <el-dialog :visible.sync="wxDialogVisible" :show-close="false" @close="closeDialog" width="320px" center>
        <h5 class="outh5">
          <img src="../../static/image/pay/weixinbig.png" class="alipaybig_icon" />
        </h5>
        <h5 class="outh5">
          <div class="bottom alipay">ä½¿ç”¨æ‰«ç æ”¯ä»˜ {{ price / 100 }}å…ƒ</div>
        </h5>
        <h5 class="outh5">
          <qriously :value="codeUrl" :size="190" />
        </h5>
        <div style="height: 40px"></div>
        <h5 class="outh7">
          <div style="color: #e0e0e0" class="bottom alipay">
            è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«<br />æ‰«æäºŒç»´ç æ”¯ä»˜<br />
          </div>
        </h5>
      </el-dialog>
    </div>
    <!-- æ”¯ä»˜å®æ”¯ä»˜äºŒç»´ç  -->
    <div>
      <el-dialog :visible.sync="aliDialogVisible" :show-close="false" @close="closeDialog" width="320px" center>
        <h5 class="outh5">
          <img src="../../static/image/pay/alipaybig.png" class="alipaybig_icon" />
        </h5>
        <h5 class="outh5">
          <div class="bottom alipay">ä½¿ç”¨æ‰«ç æ”¯ä»˜ {{ price / 100 }}å…ƒ</div>
        </h5>
        <h5 class="outh5">
          <qriously :value="codeUrl" :size="190" />
        </h5>
        <div style="height: 40px"></div>
        <h5 class="outh6">
          <div style="color: #e0e0e0" class="bottom alipay">
            è¯·ä½¿ç”¨æ”¯ä»˜å®æ‰«ä¸€æ‰«<br />æ‰«æäºŒç»´ç æ”¯ä»˜<br />
          </div>
        </h5>
      </el-dialog>
    </div>
    <div data-server-rendered="true" id="__nuxt">
      <!---->
      <div id="__layout">
        <div data-fetch-key="0" class="app light macwk-animation">
          <top :message2="acticve" />
          <div class="overflow-hidden pt-5">

            <div class="layout-header pt-5 pb-5 position-relative pc-model">
              <!-- ../static/image/loding.gif -->
              <div>
                <img src="../../static/image/shape-1.svg" class="shape-three" /><img
                  src="../../static/image/shape-55.svg" class="shape-four" /><img src="../../static/image/shape-56.svg"
                  class="shape-five" /><img src="../../static/image/shape-57.svg" class="shape-six" /><img
                  src="../../static/image/shape-58.svg" class="shape-seven" /><img src="../../static/image/shape-59.svg"
                  class="shape-eight" /><img src="../../static/image/shape-60.svg" class="shape-nine" /><img
                  src="../../static/image/shape-61.svg" class="shape-ten" /><img src="../../static/image/shape-62.svg"
                  class="shape-eleven" /><img src="../../static/image/shape-10.svg" class="shape-10" /><img
                  src="../../static/image/shape-11.svg" class="shape-11" />
              </div>
              <div v-if="videoAddress != null" class="container">
                <div class="row align-items-center">
                  <div class="col-xs-12 col-lg-6 col-xl-6">
                    <div class="header-app">
                      <img class="app-icon mr-3" />
                      <div class="list-body">
                        <h2 class="mb-4">
                          {{ title }}
                          <!---->
                          <!---->
                          <!---->
                          <!---->
                          <!---->
                        </h2>
                        <div class="mb-15">
                          <el-button size="mini" v-if="payJudej" :disabled="payBtnDisabled" @click="Download()"
                            class="btn btn-theme btn-round w-200 cursor mr-4" round><i class="el-icon-download"></i>
                            æ”¯ä»˜ä¸‹è½½</el-button>
                          <el-button size="mini" v-else :disabled="payBtnDisabled" @click="NowDownload()"
                            class="btn btn-theme btn-round w-200 cursor mr-4" round><i class="el-icon-download"></i>
                            ç«‹å³ä¸‹è½½(å·²æ”¯ä»˜)</el-button>
                          <button v-if="!lovecheck" @click="loveClick()" class="
                              btn btn-outline-theme btn-round
                              px-5
                              zanUp
                              position-relative
                            ">
                            <img class="dianzan" src="../../static/image/dianzan.svg" />
                            èµ ({{ loveNum }})
                            <span class="likeanimation">+1</span>
                          </button>
                          <button v-else @click="loveClick()" class="
                              btn btn-outline-theme btn-round
                              px-5
                              zanUp
                              position-relative
                            ">
                            <img class="dianzan" src="../../static/image/dianzanred.svg" />
                            èµ ({{ loveNum }})
                            <span class="likeanimation">+1</span>
                          </button>
                        </div>
                        <div class="mt-4 mb-6"></div>

                        <div class="mt-6 fs-13">
                          <!---->
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-xs-12 col-lg-6 col-xl-6 text-center">
                    <vue-core-video-player :src="videoSource" :title="this.title"></vue-core-video-player>

                    <!-- <div class="
                        device device-macbook-pro device-silver device-silver
                      ">
                      <div class="device-frame">


                      </div>
                      <div class="device-stripe"></div>
                      <div class="device-header"></div>
                      <div class="device-sensors"></div>
                      <div class="device-btns"></div>
                      <div class="device-power"></div>
                    </div> -->
                  </div>

              </div>
              </div>
              <div v-else class="container">
                <div class="row align-items-center">
                  <div class="col-xs-12 col-lg-6 col-xl-6">
                    <div class="header-app">
                      <img class="app-icon mr-3" />
                      <div class="list-body">
                        <h2 class="mb-4">
                          {{ title }}
                          <!---->
                          <!---->
                          <!---->
                          <!---->
                          <!---->
                        </h2>
                        <div class="mb-15">
                          <el-button size="mini" v-if="payJudej" :disabled="payBtnDisabled" @click="Download()"
                            class="btn btn-theme btn-round w-200 cursor mr-4" round><i class="el-icon-download"></i>
                            æ”¯ä»˜ä¸‹è½½</el-button>
                          <el-button size="mini" v-else :disabled="payBtnDisabled" @click="NowDownload()"
                            class="btn btn-theme btn-round w-200 cursor mr-4" round><i class="el-icon-download"></i>
                            ç«‹å³ä¸‹è½½(å·²æ”¯ä»˜)</el-button>
                          <button v-if="!lovecheck" @click="loveClick()" class="
                              btn btn-outline-theme btn-round
                              px-5
                              zanUp
                              position-relative
                            ">
                            <img class="dianzan" src="../../static/image/dianzan.svg" />
                            èµ ({{ loveNum }})
                            <span class="likeanimation">+1</span>
                          </button>
                          <button v-else @click="loveClick()" class="
                              btn btn-outline-theme btn-round
                              px-5
                              zanUp
                              position-relative
                            ">
                            <img class="dianzan" src="../../static/image/dianzanred.svg" />
                            èµ ({{ loveNum }})
                            <span class="likeanimation">+1</span>
                          </button>
                        </div>
                        <div class="mt-4 mb-6"></div>

                        <div class="mt-6 fs-13">
                          <!---->
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-xs-12 col-lg-6 col-xl-6 text-center">
                    <div class="
                        device device-macbook-pro device-silver device-silver
                      ">
                      <div v-if="carouselNum === 0" class="device-frame">
                        <el-carousel height="350px">
                          <el-carousel-item v-for="item in 1" :key="item">
                            <img style="height: 360px; width: 620px" :src="thumb" /><img />
                          </el-carousel-item>
                        </el-carousel>
                      </div>
                      <div v-else class="device-frame">
                        <el-carousel height="350px">
                          <el-carousel-item v-for="item in carousel" :key="item">
                            <img style="height: 360px; width: 620px" :src="item.url" /><img />
                          </el-carousel-item>
                        </el-carousel>
                      </div>
                      <div class="device-stripe"></div>
                      <div class="device-header"></div>
                      <div class="device-sensors"></div>
                      <div class="device-btns"></div>
                      <div class="device-power"></div>
                      <!---->
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="soft-layout white bg mb-8 pc-model">
              <section class="layout-info">
                <div class="app-info shadow-2 white bg text-center">
                  <div class="w-r">
                    <div class="w-c w-c-4">
                      <div class="border-right my-4">
                        <p class="text-muted text-uppercase fs-10 ls-2 mb-0">
                          å¤§å°
                        </p>
                        <p class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          ">
                          31.9
                        </p>
                        <p class="text-uppercase fs-10 ls-2 mb-0 opacity-70">
                          MB
                        </p>
                      </div>
                    </div>
                    <div class="w-c w-c-4">
                      <div class="border-right my-4">
                        <p class="text-muted text-uppercase fs-10 ls-2 mb-0">
                          ä¸‹è½½
                        </p>
                        <p v-if="hits == null" class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          ">

                          0
                        </p>
                        <p v-else class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          ">

                          {{ hits }}
                        </p>
                        <p class="text-uppercase fs-10 ls-2 mb-0 opacity-70">
                          æ¬¡
                        </p>
                      </div>
                    </div>
                    <div class="w-c w-c-4">
                      <div class="border-right my-4">
                        <p class="text-muted text-uppercase fs-10 ls-2 mb-0">
                          è¯­è¨€
                        </p>
                        <p class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          ">
                          <span class="text-inherit"> ä¸­æ–‡ </span>
                        </p>
                        <p class="text-uppercase fs-10 ls-2 mb-0 opacity-70">
                          cn
                        </p>
                      </div>
                    </div>
                    <div class="w-c w-c-4">
                      <div class="border-right my-4">
                        <p class="text-muted text-uppercase fs-10 ls-2 mb-0">
                          ä»·æ ¼
                        </p>
                        <p class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          ">
                          {{ price }}ç§¯åˆ†
                        </p>
                        <p class="fs-10 ls-2 mb-0 opacity-70">money</p>
                      </div>
                    </div>
                    <div class="w-c w-c-4">
                      <div class="border-right my-4">
                        <p class="text-muted text-uppercase fs-10 ls-2 mb-0">
                          ç±»åˆ«
                        </p>
                        <p class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                            hover-opacity-normal
                          ">

                          <a :href="'/classdetal/' + sortClasss">
                            {{ className }}
                            <i class="icon-arrow-r text-muted"></i></a>
                        </p>
                        <p class="fs-10 ls-2 mb-0 opacity-70">enhancement</p>
                      </div>
                    </div>
                    <div class="w-c w-c-4">
                      <div class="my-4">
                        <p class="text-uppercase fs-10 ls-2 mb-0 opacity-40">
                          æ›´æ–°æ—¥æœŸ
                        </p>

                        <p class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          " v-if="this.createTime != null" v-text="formatDate(this.createTime)"></p>
                        <p class="
                            mb-0
                            fs-20
                            font-weight-bolder
                            line-height-3
                            opacity-70
                          " v-else v-text="formatDate(this.addTime)"></p>
                        <p class="text-uppercase fs-10 ls-2 mb-0 opacity-70">
                          {{ Theweeks }}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              <section class="layout-content">
                <div id="step-read" class="layout-content-install pt-7 mb-5"></div>
                <!---->
                <!---->
                <div id="step-content" class="layout-content-infos">
                  <div class="container">
                    <div class="content-header">
                      <div class="h-150 w-r is-align-middle w-r--flex">
                        <div class="w-c w-c-2">
                          <svg width="80" height="70" viewBox="0 0 125 107" xmlns="http://www.w3.org/2000/svg">
                            <g fill="none" fill-rule="evenodd">
                              <circle cx="48" cy="59" r="48" class="circle-fill"></circle>
                              <path
                                d="M58.536 39.713c0-6.884 1.72-14.007 5.163-21.368 3.443-7.36 8.167-13.458 14.173-18.292l11.645 7.91c-3.589 4.98-6.262 10.016-8.02 15.106S78.86 33.598 78.86 39.384v13.623H58.536V39.713z"
                                class="path-fill"></path>
                              <path
                                d="M93.252 39.713c0-6.884 1.722-14.007 5.164-21.368 3.442-7.36 8.166-13.458 14.172-18.292l11.646 7.91c-3.589 4.98-6.262 10.016-8.02 15.106s-2.637 10.529-2.637 16.315v13.623H93.252V39.713z"
                                class="path-fill-1"></path>
                            </g>
                          </svg>
                        </div>
                        <div class="w-c w-c-22">
                          <h3>
                            æ­£æ–‡æ¦‚è¿°
                            <!---->
                          </h3>
                        </div>
                      </div>
                    </div>
                    <div>
                      <div class="soft-blockquote fw-400">
                        <div>
                          <p>{{ intro }}</p>
                        </div>
                      </div>
                      <!---->
                      <!---->
                    </div>
                    <!-- å†…å®¹åŒºåŸŸ -->
                    <div id="sidelist" v-html="this.content"></div>
                  </div>
                </div>
                <!---->
                <!---->
              </section>
            </div>
            <div class="mobile-model">
              <div class="
                  d-flex
                  layout-min-full-height
                  justify-content-center
                  align-items-center
                ">
                <div class="text-center" style="width: 80%; margin: 0 auto">
                  <h1 class="mb-4">å“‡ï¼Œçª—å£å¤ªå°å•¦</h1>
                  <p class="mb-6">è¯·è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æˆ–è€…è¯·ä½¿ç”¨æ‰‹æœºæŸ¥çœ‹ï¼</p>
                </div>
              </div>
            </div>
            <div class="el-dialog__wrapper text-center" style="display: none">
              <div role="dialog" aria-modal="true" aria-label="dialog" class="el-dialog no-bg no-shadow"
                style="margin-top: 15vh; width: 1300px">
                <div class="el-dialog__header">
                  <span class="el-dialog__title"></span><button type="button" aria-label="Close"
                    class="el-dialog__headerbtn">
                    <i class="el-dialog__close el-icon el-icon-close"></i>
                  </button>
                </div>
                <!---->
                <!---->
              </div>
            </div>
            <!---->
            <div id="sidetools" class="macwk-animation tinUpIn" style="display: none">
              <div class="sidetools-item">
                <div class="sidetools-wrapper">
                  <a href="https://t.me/macwk" target="_blank" class="cursor"><span
                      class="sidetools-icon kfqq"></span></a>
                </div>
              </div>
              <div class="sidetools-item">
                <div class="sidetools-wrapper">
                  <a class="el-tooltip cursor"><span class="sidetools-icon back-top"></span></a>
                </div>
              </div>
              <span>
                <div role="tooltip" id="el-popover-6929" aria-hidden="true" class="el-popover el-popper"
                  style="width: 200px; display: none">
                  <!---->
                  <div class="text-center">
                    <a href="/feedback" class="mt-15 mb-0">åœ¨çº¿ç•™è¨€</a>
                  </div>
                </div>
                <span class="el-popover__reference-wrapper"></span>
              </span>
              <span>
                <div role="tooltip" id="el-popover-3926" aria-hidden="true" class="el-popover el-popper"
                  style="width: 200px; display: none">
                  <!---->
                  <div class="text-center">
                    <a href="/feedback" class="mt-15 mb-0">åœ¨çº¿ç•™è¨€</a>
                  </div>
                </div>
                <span class="el-popover__reference-wrapper"></span>
              </span>
            </div>
            <!---->
            <!---->
          </div>
          <!-- v-on:click="show = !show"
                v-if="!show" -->
          <client-only>
            <div class="myVEmojiPicker">
              <VEmojiPicker v-show="showDialog" :style="{ width: '340px', height: '200' }" labelSearch="Search"
                lang="pt-BR" @select="onSelectEmoji" />
            </div>
          </client-only>
          <!-- åå°æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºè¯„è®º -->
          <!-- <div v-if="!this.glabledata.glableCommentShow">
            <div v-show="!judjeComment"> -->
          <section v-if="mycomment" @click="sendMsg" class="
              fiexd-comments-bar
              d-flex
              align-items-center
              is-scroll
              macwk-animation
              slow
              pc-model
              tinRightIn
            ">
            <div class="
                d-flex
                align-items-center
                fs-20
                fw-700
                cursor-pointer
                w-full
                pl-3
              ">
              <div class="flex">
                å…±
                <span class="fs-36 mx-1">{{ commentnum || 0 }}</span>
                æ¡è¯„è®º
              </div>
              <svg color="inherit" viewbox="0 0 32 32" class="w-32" style="
                  width: 1.5em;
                  height: 1.5em;
                  font-size: 2rem;
                  vertical-align: -6px;
                ">
                <path fill="#FFFFFF"
                  d="M12.63,26.46H8.83a6.61,6.61,0,0,1-6.65-6.07,89.05,89.05,0,0,1,0-11.2A6.5,6.5,0,0,1,8.23,3.25a121.62,121.62,0,0,1,15.51,0A6.51,6.51,0,0,1,29.8,9.19a77.53,77.53,0,0,1,0,11.2,6.61,6.61,0,0,1-6.66,6.07H19.48L12.63,31V26.46">
                </path>
                <path
                  d="M19.57,21.68h3.67a2.08,2.08,0,0,0,2.11-1.81,89.86,89.86,0,0,0,0-10.38,1.9,1.9,0,0,0-1.84-1.74,113.15,113.15,0,0,0-15,0A1.9,1.9,0,0,0,6.71,9.49a74.92,74.92,0,0,0-.06,10.38,2,2,0,0,0,2.1,1.81h3.81V26.5Z"
                  class="comment-icon-path"></path>
              </svg>
            </div>
          </section>
          <!-- </div>
          </div> -->
          <comment :articleId="this.$route.params.id" :theEmoge="this.MyEmoge" ref="child"
            @closethecpmmentName="updateDate()" @openthecpmmentName="showemoge()" />
          <!---->
          <!---->
          <foot />
          <div infos="0">
            <div class="
                adBanner
                pub_300x250 pub_300x250m pub_728x90
                text-ad
                textAd
                text_ad text_ads text-ads text-ad-links
              "></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>

import { getResourceById } from "../../asyncApi/webresource";

import { VEmojiPicker, emojisDefault, categoriesDefault } from "v-emoji-picker";

import comment from '../components/ResComment.vue'

import { getResourceCommentnum } from '@/api/webresourceComment'
import { loveresource } from '@/api/webresource'
import { getResourceClassNameByid } from '@/api/webresourceclass'

import { formatDate, GetWeekdate } from '@/utils/date.js'

import wxPayApi from '../../api/payment/wxPay'
import aliPayApi from '../../api/payment/aliPay'
import orderInfoApi from '../../api/payment/orderInfo'
export default {

  name: 'Resource',
  components: {
    top: () => import("../components/Top.vue"),
    foot: () => import("../components/Foots.vue"),
    comment, VEmojiPicker

  },
  // å½“ä½ æƒ³è¦åŠ¨æ€é¡µé¢å†…å®¹æœ‰åˆ©äºSEOæˆ–è€…æ˜¯æå‡é¦–å±æ¸²æŸ“é€Ÿåº¦çš„æ—¶å€™ï¼Œå°±åœ¨asyncDataä¸­è¯·æ±‚æ•°æ®
  // æ‰€æœ‰æ¥å£é€šè¿‡æœåŠ¡ç«¯è°ƒç”¨æ¸²æŸ“
  // åªæœ‰åˆ—è¡¨é€šè¿‡æœåŠ¡ç«¯è°ƒç”¨æ¸²æŸ“ï¼Œåˆ†ç±»è·Ÿæ¨èæ¥å£åœ¨æµè§ˆå™¨è°ƒç”¨
  async asyncData({ route }) {
    let [Resource] = await Promise.all([
      getResourceById({ page: route.params.id || 1 }),
    ]);
    return {
      Resource: Resource,
      createTime: Resource.createTime,
      addTime: Resource.addTime,
      page: parseInt(route.params.id || 1),
    };
  },
  methods: {
    loveClick() {
      if (!this.lovecheck) {
        if (this.firstLoveFlag) {
          loveresource(this.$route.params.id).then(resp => {
          })
          this.firstLoveFlag = false
        }
        this.$notify({
          title: 'ç‚¹èµæˆåŠŸğŸ‘',
          message: 'æ‚¨çš„èµæˆ‘ä»¬å·²ç»æ”¶åˆ°ğŸ«¡',
          type: 'success',
          offset: 50
        });
        this.loveNum += 1
        this.lovecheck = true
      }
      else {
        this.$notify({
          title: 'å–æ¶ˆç‚¹èµ',
          message: 'æ˜¯ä»€ä¹ˆè®©æ‚¨ä¸å–œæ¬¢äº†å—ï¼Œæˆ‘é“æ­‰',
          type: 'success',
          offset: 50
        });
        this.loveNum -= 1
        this.lovecheck = false
      }
    },
    onSelectEmoji(emoji) {
      this.MyEmoge = emoji.data;
    },
    showemoge() {
      // console.log("show")
      this.showDialog = !this.showDialog;
    },
    sendMsg() {
      this.$refs.child.getMsg('true');
      this.mycomment = false;
    },
    updateDate() {
      //å…³é—­è¡¨æƒ…
      this.showDialog = false
      // console.log(data.show)
      this.mycomment = true;
      // console.log("è°ƒç”¨äº†çˆ¶ç»„ä»¶çš„æ–¹æ³•")
      // this.show1 = data.show;
      //æ”¹å˜äº†çˆ¶ç»„ä»¶çš„å€¼
      // console.log('toCity:'+this.show1)
    },
    formatDate(time) {
      let data = new Date(time)
      return formatDate(data, 'yyyy-MM-dd ')
    },
    // æŸ¥è¯¢è®¢å•çŠ¶æ€
    queryOrderStatus() {
      orderInfoApi.queryOrderStatus(this.orderNo).then(response => {
        console.log('æŸ¥è¯¢è®¢å•çŠ¶æ€ï¼š' + response.data.code)

        // æ”¯ä»˜æˆåŠŸåçš„é¡µé¢è·³è½¬
        if (response.data.code === 0) {
          console.log('æ¸…é™¤å®šæ—¶å™¨')
          clearInterval(this.timer)
          // å…³é—­é¡µé¢æ”¯ä»˜æ¡†
          this.wxDialogVisible = false
          this.aliDialogVisible = false
          this.$notify({
            title: 'æ”¯ä»˜æˆåŠŸ',
            message: 'æ‚¨å·²æˆåŠŸè´­ä¹°',
            type: 'success',
            offset: 50
          });
          // ä¸‰ç§’åè·³è½¬åˆ°è®¢å•åˆ—è¡¨
          setTimeout(() => {
            this.$router.push({ path: '/download/' + this.$route.params.id })
          }, 500)
        }
      })
    },

    //å…³é—­å¾®ä¿¡æ”¯ä»˜äºŒç»´ç å¯¹è¯æ¡†æ—¶è®©â€œç¡®è®¤æ”¯ä»˜â€æŒ‰é’®å¯ç”¨
    closeDialog() {
      console.log('close.................')
      this.payBtnDisabled = false
      console.log('æ¸…é™¤å®šæ—¶å™¨')
      clearInterval(this.timer)
    },

    //é€‰æ‹©æ”¯ä»˜æ–¹å¼(ç™»å½•)
    selectPayTypeLogin(type) {
      console.log('æ”¯ä»˜æ–¹å¼ï¼š' + type)
      this.payOrder.payType = type
      //å…³é—­æ”¯ä»˜æ–¹å¼é€‰æ‹©
      this.PaymentDialogVisibleTemp = false
      this.PaymentDialogVisibleLogin = false
      //æ‰“å¼€å¯¹åº”æ”¯ä»˜é¡µé¢

      //æ”¯ä»˜å®æ”¯ä»˜
      if (this.payOrder.payType === 'alipay') {
        this.aliDialogVisible = true
        //è°ƒç”¨ç»Ÿä¸€ä¸‹å•æ¥å£
        aliPayApi.ftofPayLogin(this.$route.params.id, this.userid).then(response => {
          this.codeUrl = response.data.data.codeUrl
          this.orderNo = response.data.data.orderNo

          //å¯åŠ¨å®šæ—¶å™¨
          this.timer = setInterval(() => {
            //æŸ¥è¯¢è®¢å•æ˜¯å¦æ”¯ä»˜æˆåŠŸ
            this.queryOrderStatus()
          }, 3000)

        })
      }
      //å¾®ä¿¡æ”¯ä»˜
      if (this.payOrder.payType === 'wxpay') {
        //æ‰“å¼€æ”¯ä»˜äºŒç»´ç 
        this.wxDialogVisible = true
        //è°ƒç”¨ç»Ÿä¸€ä¸‹å•æ¥å£
        wxPayApi.nativePayLogin(this.$route.params.id, this.userid).then(response => {
          console.log(response.data.data.codeUrl)
          this.codeUrl = response.data.data.codeUrl
          this.orderNo = response.data.data.orderNo

          //å¯åŠ¨å®šæ—¶å™¨
          this.timer = setInterval(() => {
            //æŸ¥è¯¢è®¢å•æ˜¯å¦æ”¯ä»˜æˆåŠŸ
            this.queryOrderStatus()
          }, 3000)

        })

      }
    },
    //é€‰æ‹©æ”¯ä»˜æ–¹å¼(ä¸´æ—¶)
    selectPayType(type) {
      console.log('æ”¯ä»˜æ–¹å¼ï¼š' + type)
      this.payOrder.payType = type
      //å…³é—­æ”¯ä»˜æ–¹å¼é€‰æ‹©
      this.PaymentDialogVisibleTemp = false
      this.PaymentDialogVisibleLogin = false
      //æ‰“å¼€å¯¹åº”æ”¯ä»˜é¡µé¢
      //æ”¯ä»˜å®æ”¯ä»˜
      if (this.payOrder.payType === 'alipay') {
        this.aliDialogVisible = true
        //è°ƒç”¨ç»Ÿä¸€ä¸‹å•æ¥å£
        aliPayApi.ftofPayTemp(this.$route.params.id).then(response => {
          this.codeUrl = response.data.data.codeUrl
          this.orderNo = response.data.data.orderNo

          //å¯åŠ¨å®šæ—¶å™¨
          this.timer = setInterval(() => {
            //æŸ¥è¯¢è®¢å•æ˜¯å¦æ”¯ä»˜æˆåŠŸ
            this.queryOrderStatus()
          }, 3000)

        })
      }
      //å¾®ä¿¡æ”¯ä»˜
      if (this.payOrder.payType === 'wxpay') {
        //æ‰“å¼€æ”¯ä»˜äºŒç»´ç 
        this.wxDialogVisible = true

        //è°ƒç”¨ç»Ÿä¸€ä¸‹å•æ¥å£
        wxPayApi.nativePayTemp(this.$route.params.id).then(response => {
          console.log(response.data.data.codeUrl)
          this.codeUrl = response.data.data.codeUrl
          this.orderNo = response.data.data.orderNo

          //å¯åŠ¨å®šæ—¶å™¨
          this.timer = setInterval(() => {
            //æŸ¥è¯¢è®¢å•æ˜¯å¦æ”¯ä»˜æˆåŠŸ
            this.queryOrderStatus()
          }, 3000)

        })

      }
    },
    NowDownload() {
      setTimeout(() => {
        this.$router.push({ path: '/download/' + this.$route.params.id })
      }, 500)

    },
    Download() {
      if (process.client) {
        const user = JSON.parse(window.localStorage.getItem('access-admin'))
        this.userJudje = (user == null)
        if (!this.userJudje) { this.userid = user.data.userid }
        if (this.userJudje) {
          //æ¸¸å®¢è´­ä¹°
          console.log("æ¸¸å®¢è´­ä¹°")
          //ç¦ç”¨æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
          this.payBtnDisabled = true
          //æ‰“å¼€æ”¯ä»˜æ–¹å¼é€‰æ‹©
          this.PaymentDialogVisibleTemp = true
        }
        else {
          //ç™»å½•ç”¨æˆ·è´­ä¹°
          console.log("ç™»å½•ç”¨æˆ·è´­ä¹°")
          //ç¦ç”¨æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
          this.payBtnDisabled = true

          //æ‰“å¼€æ”¯ä»˜æ–¹å¼é€‰æ‹©
          this.PaymentDialogVisibleLogin = true
        }
      }
    },
    async judgeResource() {
      const user = JSON.parse(window.localStorage.getItem('access-admin'))
      this.userJudje = (user == null)
      if (!this.userJudje) {
        this.userid = user.data.userid
        let [res] = await orderInfoApi.queryOrderStatusBytrue(this.$route.params.id, this.userid);
        if (res) {
          //æ£€æŸ¥å·²ç™»å½•ç”¨æˆ·æ˜¯å¦è´­ä¹°è¿‡æ­¤èµ„æºï¼Œæ ¹æ®useridå’Œresourceidåˆ¤æ–­
          if (res.data.code == 0) {
            this.payJudej = false
          }
          if (res.data.code == 101) {
            this.payJudej = true
          }
        }
      }
    },
    async fetchData() {
      this.hits = this.Resource.hits
      this.loveNum = this.Resource.loveNum
      if (this.loveNum == null) {
        this.loveNum = 0
      }
      this.videoAddress = this.Resource.videoAddress
      // å°†this.videoAddresså°è£…ä¸ºvideoSourceå½¢å¼
      this.videoSource = [{
        src: this.videoAddress,
        resolution: '1080p' // ä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚æ·»åŠ å…¶ä»–åˆ†è¾¨ç‡
      }];
      console.log(this.videoAddress)
      this.thumb = this.Resource.thumb
      this.title = this.Resource.title
      this.price = this.Resource.price
      this.author = this.Resource.author
      this.content = this.Resource.content
      this.intro = this.Resource.intro

      var str = JSON.parse(this.Resource.carousel)
      this.carouselNum = str.length
      this.carousel = str
      var sortClasss = this.Resource.sortClass
      this.sortClasss = sortClasss
      //æ ¹æ®classidè·å–åˆ†ç±»åç§°
      let [res] = await getResourceClassNameByid(sortClasss);
      if (res) {
        this.className = res.data;
      }
      //è·å–èµ„æºè¯„è®ºæ•°é‡
      getResourceCommentnum(this.$route.params.id).then(resp => {
        this.commentnum = resp.data
      })
      if (this.createTime != null) {
        let data = new Date(this.createTime)
        var intime = formatDate(data, 'yyyy-MM-dd')
        var tiems = GetWeekdate(intime)
        this.Theweeks = this.weeks[tiems]
      } else {
        let data = new Date(this.addTime)
        var intime = formatDate(data, 'yyyy-MM-dd')
        var tiems = GetWeekdate(intime)
        this.Theweeks = this.weeks[tiems]
      }
      this.intro = this.Resource.intro
    },
  },
  data() {
    return {
      videoSource: [],
      videoAddress: "",
      lovecheck: false,
      firstLoveFlag: true,
      loveNum: "",
      hits: "",
      carouselNum: "",
      commentnum: "",
      MyEmoge: "",
      showDialog: false,
      mycomment: true,
      carousel: [],
      className: "",
      sortClasss: "",
      sortClass: "",
      Theweeks: "",
      weeks: {
        "0": 'æ˜ŸæœŸæ—¥',
        "1": 'æ˜ŸæœŸä¸€',
        "2": 'æ˜ŸæœŸäºŒ',
        "3": 'æ˜ŸæœŸä¸‰',
        "4": 'æ˜ŸæœŸå››',
        "5": 'æ˜ŸæœŸäº”',
        "6": 'æ˜ŸæœŸå…­',
      },

      payJudej: true,
      payBtnDisabled: false,
      orderNo: "",
      codeUrl: "url",
      payOrder: { //è®¢å•ä¿¡æ¯
        productId: '', //å•†å“id
        payType: 'wxpay' //æ”¯ä»˜æ–¹å¼
      },
      PaymentDialogVisibleLogin: false, //æ”¯ä»˜æ–¹å¼å¼¹çª—
      PaymentDialogVisibleTemp: false, //æ”¯ä»˜æ–¹å¼å¼¹çª—
      wxDialogVisible: false, //å¾®ä¿¡æ”¯ä»˜äºŒç»´ç å¼¹çª—
      aliDialogVisible: false, //æ”¯ä»˜å®æ”¯ä»˜äºŒç»´ç å¼¹çª—
      intro: "",
      content: "",
      price: "",
      title: "",
      acticve: 'nav-link active',
    }
  },
  mounted() {
    // åˆ¤æ–­æ˜¯å¦åœ¨æœåŠ¡ç«¯
    if (process.client) {
      // this.lazyLoad();
      // åœ¨æµè§ˆå™¨ç«¯è°ƒæ¥å£ï¼Œéœ€è¦æœåŠ¡ç«¯åšåå‘ä»£ç†
      // //æ•°æ®å›å¡«
      this.fetchData()
    } else {
      //æ ¹æ®IdæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦è´­ä¹°è¿‡æ­¤èµ„æº
      this.judgeResource()
    }

    // é¡¶éƒ¨å¹¿å‘Š
    // (window.slotbydup = window.slotbydup || []).push({
    //   id: "u6324930",
    //   container: "_utrtw8kq5so",
    //   async: true,
    // });
  },
}
</script>
<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.chat-container {
  z-index: 20 !important;
  border-radius: 10px !important;
  -webkit-box-shadow: 0 5px 25px 0 rgb(0 0 0 / 13%) !important;
  box-shadow: 0 5px 25px 0 rgb(0 0 0 / 13%) !important;
  background-color: #fff !important;
  width: 360px !important;
  height: 80% !important;
  left: auto !important;
  right: 20px !important;
  bottom: 20px !important;
}
</style>

<style scoped>
.myVEmojiPicker :deep(.category) {
  background: none;
}

.myVEmojiPicker :deep(.border) {
  border: 0px solid hsla(210, 8%, 51%, 0.09) !important;
}

.myVEmojiPicker :deep(.myVEmojiPicker[data-v-3bfe90b7]) .border {
  border: 0px solid hsla(210, 8%, 51%, 0.09) !important;
}

.myVEmojiPicker :deep(.category.active[data-v-6d975e7c]) {
  border-bottom: 3px solid #50a1ff;
}

.myVEmojiPicker :deep(.grid-emojis[data-v-5c988bee]) {
  background: #ffffff;
}

.myVEmojiPicker :deep(.emoji-picker[data-v-f1d527bc]) {
  --ep-color-bg: #ffffff;
  --ep-color-sbg: none;
}

.myVEmojiPicker {
  position: fixed;
  display: flex;
  flex-direction: column;
  right: 390px;
  bottom: 20px;
  z-index: 10;
}

.alipaybig_icon {
  display: inline-block;
  width: 120px;
  margin: 0;
  padding: 0;
  text-align: center;
}

.outh5 {
  padding: 0px;
  display: flex;
  align-content: flex-end;
  justify-content: center;
  flex-wrap: wrap;
}

.outh6 {
  height: 66px;
  text-align: center;
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 320px;
  background-color: #01a7ef;
  padding: 7px;
  display: flex;
  align-content: flex-end;
  justify-content: center;
  flex-wrap: wrap;
  border-radius: 0 0 10px 10px;
}

.outh7 {
  height: 66px;
  text-align: center;
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 320px;
  background-color: #09bb21;
  padding: 7px;
  display: flex;
  align-content: flex-end;
  justify-content: center;
  flex-wrap: wrap;
  border-radius: 0 0 10px 10px;
}
</style>
<style>
.el-dialog--center {
  border-radius: 10px;
}

.el-dialog--center .el-dialog__body {
  border-radius: 10px;
  text-align: initial;
  background-color: #fff;
}

.el-dialog__header {
  display: none;
  background-color: #e0e0e0;
}
</style>
<style scoped>
.pay-button-box {
  padding: 12px 30px;
  z-index: 1;
  text-align: center;
}

.swal2-content {
  z-index: 1;
  justify-content: center;
  margin: 0;
  padding: 0;
  color: #545454;
  font-size: 1.125em;
  font-weight: 300;
  line-height: normal;
  text-align: center;
  word-wrap: break-word;
}

.pay-item {
  width: 100%;
  height: 60px;
  border: 0;
  cursor: pointer;
  font-size: 1.25rem;
  display: inline-block;
  line-height: 60px;
  text-align: center;
}

.device-macbook-pro .device-frame:before {
  bottom: 10px;
  color: #c8cacb;
  content: "IceCMS.cn";
  font-size: 12px;
  height: 16px;
  left: 50%;
  line-height: 16px;
  margin-left: -100px;
  position: absolute;
  text-align: center;
  width: 200px;
  z-index: 1;
}

.el-carousel__item h3 {
  color: #475669;
  font-size: 14px;
  opacity: 0.75;
  line-height: 150px;
  margin: 0;
}

.el-carousel__item:nth-child(2n) {
  background-color: #99a9bf;
}

.el-carousel__item:nth-child(2n + 1) {
  background-color: #d3dce6;
}

.dianzan {
  weight: 25px;
  height: 25px;
}

.player-container-out {
  width: 70%;
  display: flex;
}
</style>
